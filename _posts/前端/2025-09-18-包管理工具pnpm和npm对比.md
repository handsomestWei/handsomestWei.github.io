---
title: åŒ…ç®¡ç†å·¥å…·pnpmå’Œnpmå¯¹æ¯”
date: 2025-09-18 16:00:00
categories: [å‰ç«¯, åŒ…ç®¡ç†]
tags: [å‰ç«¯, pnpm, npm]
image:
  path: /assets/img/posts/common/big-frontend.jpg
---

# åŒ…ç®¡ç†å·¥å…·pnpmå’Œnpmå¯¹æ¯”
pnpmå’Œnpméƒ½æ˜¯Node.jsçš„åŒ…ç®¡ç†å·¥å…·ã€‚æ€»çš„æ¥è¯´ï¼Œpnpmåœ¨æ€§èƒ½å’Œå®‰å…¨æ€§æ–¹é¢æœ‰æ˜æ˜¾ä¼˜åŠ¿ï¼Œè€Œnpmåœ¨å…¼å®¹æ€§æ–¹é¢æ›´èƒœä¸€ç­¹ã€‚

## ğŸš€ **æ€§èƒ½å·®å¼‚**

### **pnpmä¼˜åŠ¿**
- **ç£ç›˜ç©ºé—´æ•ˆç‡**ï¼šä½¿ç”¨ç¡¬é“¾æ¥å’Œç¬¦å·é“¾æ¥ï¼Œé¿å…é‡å¤å­˜å‚¨ç›¸åŒçš„åŒ…
- **å®‰è£…é€Ÿåº¦**ï¼šé€šå¸¸æ¯”npmå¿«2-3å€
- **ç½‘ç»œæ•ˆç‡**ï¼šåªä¸‹è½½ç¼ºå¤±çš„åŒ…ï¼Œä¸ä¼šé‡å¤ä¸‹è½½

### **npmç‰¹ç‚¹**
- **ä¼ ç»Ÿæ–¹å¼**ï¼šæ¯ä¸ªé¡¹ç›®éƒ½å®Œæ•´å¤åˆ¶ä¾èµ–åŒ…
- **å…¼å®¹æ€§å¥½**ï¼šä¸æ‰€æœ‰Node.jsé¡¹ç›®å®Œå…¨å…¼å®¹

## ğŸ“ **å­˜å‚¨æœºåˆ¶**

### **pnpm**
```
node_modules/
â”œâ”€â”€ .pnpm/           # å…¨å±€å­˜å‚¨ï¼Œæ‰€æœ‰åŒ…çš„å®é™…æ–‡ä»¶
â”‚   â””â”€â”€ package@version/
â””â”€â”€ package/         # ç¬¦å·é“¾æ¥æŒ‡å‘.pnpmä¸­çš„å®é™…æ–‡ä»¶
```

### **npm**
```
node_modules/
â”œâ”€â”€ package1/        # å®Œæ•´å¤åˆ¶
â”œâ”€â”€ package2/        # å®Œæ•´å¤åˆ¶
â””â”€â”€ package3/        # å®Œæ•´å¤åˆ¶
```

## ğŸ”’ **ä¾èµ–ç®¡ç†**

### **pnpm**
- **ä¸¥æ ¼æ¨¡å¼**ï¼šåªå…è®¸è®¿é—®package.jsonä¸­å£°æ˜çš„ä¾èµ–
- **æ‰å¹³åŒ–é™åˆ¶**ï¼šé¿å…å¹½çµä¾èµ–é—®é¢˜
- **æ›´å®‰å…¨**ï¼šé˜²æ­¢æ„å¤–è®¿é—®æœªå£°æ˜çš„åŒ…

### **npm**
- **æ‰å¹³åŒ–å®‰è£…**ï¼šè‡ªåŠ¨æå‡ä¾èµ–åˆ°é¡¶å±‚
- **å®½æ¾æ¨¡å¼**ï¼šå¯èƒ½å…è®¸è®¿é—®æœªå£°æ˜çš„ä¾èµ–
- **å…¼å®¹æ€§å¥½**ï¼šä½†å¯èƒ½å¯¼è‡´ä¾èµ–æ··ä¹±

## å¸¸è§é—®é¢˜
åœ¨pnpmç®¡ç†çš„å·¥ç¨‹ä¸­ï¼Œä½¿ç”¨npmå‘½ä»¤æ‰“åŒ…ï¼Œå‡ºç°`ERESOLVE unable to resolve dependency tree`ç‰ˆæœ¬å†²çªæŠ¥é”™ã€‚é™¤äº†è°ƒæ•´æœ‰é—®é¢˜çš„åŒ…ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥å¢åŠ å‚æ•°ç»•è¿‡ä¾èµ–å†²çªæ£€æŸ¥å’Œå¼ºåˆ¶å®‰è£…ã€‚
```sh
npm install --legacy-peer-deps
```

## ğŸ“Š **å¯¹æ¯”è¡¨æ ¼**

| ç‰¹æ€§ | pnpm | npm |
|------|------|-----|
| å®‰è£…é€Ÿåº¦ | âš¡ å¿« | ğŸŒ æ…¢ |
| ç£ç›˜ä½¿ç”¨ | ğŸ’¾ èŠ‚çœ | ğŸ’¾ å ç”¨å¤š |
| å®‰å…¨æ€§ | ğŸ”’ ä¸¥æ ¼ | ğŸ”“ å®½æ¾ |
| å…¼å®¹æ€§ | âš ï¸ éƒ¨åˆ† | âœ… å®Œå…¨ |
| å­¦ä¹ æˆæœ¬ | ğŸ“š ä½ | ğŸ“š ä½ |

## ğŸ› ï¸ **å¸¸ç”¨å‘½ä»¤å¯¹æ¯”**

| æ“ä½œ | pnpm | npm |
|------|------|-----|
| å®‰è£…ä¾èµ– | `pnpm install` | `npm install` |
| æ·»åŠ åŒ… | `pnpm add package` | `npm install package` |
| ç§»é™¤åŒ… | `pnpm remove package` | `npm uninstall package` |
| è¿è¡Œè„šæœ¬ | `pnpm run script` | `npm run script` |
| å…¨å±€å®‰è£… | `pnpm add -g package` | `npm install -g package` |

## **ä½¿ç”¨å»ºè®®**

### **é€‰æ‹©pnpmçš„æƒ…å†µ**
- ç£ç›˜ç©ºé—´æœ‰é™
- éœ€è¦å¿«é€Ÿå®‰è£…
- é‡è§†ä¾èµ–å®‰å…¨æ€§
- å¤§å‹é¡¹ç›®æˆ–monorepo

### **é€‰æ‹©npmçš„æƒ…å†µ**
- éœ€è¦æœ€å¤§å…¼å®¹æ€§
- å›¢é˜Ÿä¸ç†Ÿæ‚‰pnpm
- ä½¿ç”¨ç‰¹å®šå·¥å…·é“¾
- ç®€å•é¡¹ç›®

## ğŸ”„ **è¿ç§»å»ºè®®**

å¦‚æœæ‚¨æƒ³ä»npmè¿ç§»åˆ°pnpmï¼š

1. **å®‰è£…pnpm**ï¼š
   ```bash
   npm install -g pnpm
   ```

2. **åˆ é™¤node_modules**ï¼š
   ```bash
   rm -rf node_modules
   ```

3. **ä½¿ç”¨pnpmå®‰è£…**ï¼š
   ```bash
   pnpm install
   ```